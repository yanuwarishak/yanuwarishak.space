import { useEffect, useState } from 'react'

export function ShareButton({ title, summary, url }) {
  const [isSupportWebShare, setSupportWebShare] = useState(false)

  useEffect(() => {
    if (navigator.share) {
      setSupportWebShare(true)
    }
  }, [])

  const shareMe = (e) => {
    e.preventDefault()

    navigator
      .share({
        title: `${title}`,
        text: summary,
        url: url,
      })
      .then()
      .catch((error) => console.error('Sharing error', error))
  }
  return isSupportWebShare ? (
    <a
      className="bg-gray-100 rounded-full p-1 w-5 h-5 xs:w-7 xs:h-7 flex place-items-center justify-center"
      title="Share Post"
      onClick={shareMe}
      href=""
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        className="fill-[#000000]"
      >
        <path d="M 18 2 C 16.35499 2 15 3.3549904 15 5 C 15 5.1909529 15.021791 5.3771224 15.056641 5.5585938 L 7.921875 9.7207031 C 7.3985399 9.2778539 6.7320771 9 6 9 C 4.3549904 9 3 10.35499 3 12 C 3 13.64501 4.3549904 15 6 15 C 6.7320771 15 7.3985399 14.722146 7.921875 14.279297 L 15.056641 18.439453 C 15.021555 18.621514 15 18.808386 15 19 C 15 20.64501 16.35499 22 18 22 C 19.64501 22 21 20.64501 21 19 C 21 17.35499 19.64501 16 18 16 C 17.26748 16 16.601593 16.279328 16.078125 16.722656 L 8.9433594 12.558594 C 8.9782095 12.377122 9 12.190953 9 12 C 9 11.809047 8.9782095 11.622878 8.9433594 11.441406 L 16.078125 7.2792969 C 16.60146 7.7221461 17.267923 8 18 8 C 19.64501 8 21 6.6450096 21 5 C 21 3.3549904 19.64501 2 18 2 z M 18 4 C 18.564129 4 19 4.4358706 19 5 C 19 5.5641294 18.564129 6 18 6 C 17.435871 6 17 5.5641294 17 5 C 17 4.4358706 17.435871 4 18 4 z M 6 11 C 6.5641294 11 7 11.435871 7 12 C 7 12.564129 6.5641294 13 6 13 C 5.4358706 13 5 12.564129 5 12 C 5 11.435871 5.4358706 11 6 11 z M 18 18 C 18.564129 18 19 18.435871 19 19 C 19 19.564129 18.564129 20 18 20 C 17.435871 20 17 19.564129 17 19 C 17 18.435871 17.435871 18 18 18 z"></path>
      </svg>
    </a>
  ) : null
}

export function TwitterShare({ title, summary, url }) {
  return (
    <a
      className="bg-gray-100 rounded-full p-1 w-5 h-5 xs:w-7 xs:h-7 flex place-items-center justify-center"
      title="Share on Twitter"
      target="_blank"
      rel="norefferer noopener"
      href={`https://twitter.com/intent/tweet?text=${title} - by Yanuwar Ishak. ${summary} ${url}`}
    >
      <svg
        className="fill-[#1DA1F2]"
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
      >
        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
      </svg>
    </a>
  )
}
